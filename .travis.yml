language: ruby

rvm: 2.2.3

sudo: false

cache:
  apt: true
addons:
  apt_packages:
  - bc

env:
  matrix:
  - INTEGRATION_SPECS=1
  - NO_INTEGRAITON_SPECS=1

script:
- bundle exec rubocop
- bundle exec rspec spec
- bundle exec chirp

after_success: bundle exec chirp pushback

after_failure: bundle exec chirp dumplogs ./log

notifications:
  webhooks:
    urls:
    - 'https://chirp-tracker-production.herokuapp.com/travis'
    on_success: always
    on_failure: never
